<!DOCTYPE html>
<html lang="en" data-bs-theme="light">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PokeLocke</title>

    <!-- ============================================= -->
    <!-- IMPORTS (Do not touch these)                  -->
    <!-- ============================================= -->
    <!-- 1. BOOTSTRAP: Makes styling easy -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- 2. ICONS: For the cool symbols -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- 3. AOS: For the scrolling animations -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- 4. OUR CUSTOM CSS: The file where we write our own rules -->
    <link rel="stylesheet" href="styles.css">
    <style>
    /* 1. EL ESTUCHE (Fondo oscuro) */
    .medal-case {
        background: linear-gradient(145deg, #222, #111);
        border: 1px solid #444;
        border-radius: 8px;
        padding: 8px 12px;
        display: flex;
        justify-content: space-between; /* Distribuye las medallas a lo ancho */
        gap: 4px;
        margin-bottom: 10px;
        box-shadow: inset 0 2px 5px rgba(0,0,0,0.8);
    }

    /* 2. LA MEDALLA (Hueco vac√≠o por defecto) */
    .gym-badge {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background-color: #2a2a2a; /* Color apagado */
        border: 2px solid #333;
        box-shadow: inset 1px 1px 2px rgba(0,0,0,0.5);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
    }

    /* 3. INTERACTIVIDAD (Solo para el due√±o) */
    .gym-badge.clickable {
        cursor: pointer;
    }
    .gym-badge.clickable:hover {
        transform: scale(1.2);
        filter: brightness(1.2);
    }

    /* 4. MEDALLA CONSEGUIDA (Brillante) */
    .gym-badge.earned {
        background: radial-gradient(circle at 30% 30%, rgb(255, 255, 255), var(--badge-color));
        box-shadow: 0 0 8px var(--badge-color), inset -1px -1px 2px rgba(0,0,0,0.5);
        border-color: rgba(255,255,255,0.8);
        transform: scale(1.1);
    }
    
    /* Brillo extra */
    .gym-badge.earned::after {
        content: '';
        position: absolute;
        top: 2px;
        left: 3px;
        width: 6px;
        height: 3px;
        background: rgba(255,255,255,0.7);
        border-radius: 50%;
        transform: rotate(-45deg);
    }
    </style>
</head>

<body>
    <!-- ============================================= -->
    <!-- NAVBAR (Sticky Header)                        -->
    <!-- ============================================= -->
    <nav class="navbar navbar-expand-lg sticky-top bg-body-tertiary navbar-shadow">
        <div class="container">
            <!-- TODO: CHANGE THIS TO YOUR NAME -->
            <a class="navbar-brand fw-bold" href="index.html">Locke.Dev</a>

            <!-- Mobile Hamburger Menu Button -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navMenu">
                <ul class="navbar-nav align-items-center">      
                    <li class="nav-item mx-2">
                        <a class="nav-link fw-bold" href="create.html">Create Party</a>
                    </li>
                    <li class="nav-item mx-2">
                        <a class="nav-link fw-bold" href="join.html">Join Party</a>
                    </li>
                    <li class="nav-item mx-2">
                        <a class="nav-link fw-bold" href="stats.html">Statistics</a>
                    </li>
                    <li class="nav-item mx-2">
                        <a class="nav-link fw-bold" href="info.html">Information</a>
                    </li>
                    <li class="nav-item ms-2">
                        <button class="btn border-0 theme-switch" id="theme-toggle" aria-label="Toggle theme">
                            <div class="switch-handle">
                                <i class="bi bi-sun-fill" id="theme-icon"></i>
                            </div>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- ============================================= -->
    <!-- STATS SECTION                                 -->  
    <!-- ============================================= -->
    <section id="stats" class="py-5 fade-up">
        <div class="container" data-aos="fade-up">
            <div class="text-center mb-5">
                <h2 class="fw-bold" id="view-party-name">Cargando Sala...</h2>
                <p class="text-body-secondary">Host: <span id="view-host-name">...</span></p>
                <div class="badge bg-primary fs-6 mb-3" id="view-player-count">Jugadores: 0/0</div>
            </div>
            <div class="row g-4 mb-5">
                <div class="col-md-6">
                    <div class="card h-100 p-4 shadow-sm border-danger" style="border-left-width: 5px;">
                        <h4 class="fw-bold mb-3"><i class="bi bi-exclamation-triangle-fill text-danger me-2"></i>Reglas</h4>
                        <p id="view-rules" style="white-space: pre-line;">Cargando reglas...</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card h-100 p-4 shadow-sm border-info" style="border-left-width: 5px;">
                        <h4 class="fw-bold mb-3"><i class="bi bi-info-circle-fill text-info me-2"></i>Descripci√≥n</h4>
                        <p id="view-desc" style="white-space: pre-line;">Sin descripci√≥n.</p>
                    </div>
                </div>
            </div>

            <h3 class="fw-bold mb-4 border-bottom pb-2">Entrenadores</h3>
            <div id="players-grid" class="row g-4">
                </div>
        </div>
    </section>
    <!-- ============================================= -->
    <!-- CAPTURE BUTTON & MODAL                        -->
    <!-- ============================================= -->
    <section>
        <div class="fixed-bottom container p-4 text-end" style="z-index: 1000; pointer-events: none;">
            <button class="btn btn-primary rounded-circle shadow-lg p-3" 
                style="width: 60px; height: 60px; pointer-events: auto;" 
                data-bs-toggle="modal" 
                data-bs-target="#captureModal">
            <i class="bi bi-plus-lg fs-4"></i>
            </button>
        </div>

        <div class="modal fade" id="captureModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header bg-primary text-white">
                        <h5 class="modal-title fw-bold"><i class="bi bi-pokeball me-2"></i>Nueva Captura</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="form-captura">
                            <div class="mb-3">
                                <label for="poke-especie" class="form-label">Pok√©mon</label>
                                <input type="text" id="poke-especie" class="form-control" placeholder="Ej: Bulbasaur" required>
                                <div class="form-text">Escribe el nombre en ingl√©s para ver la imagen.</div>
                            </div>

                            <div class="mb-3">
                                <label for="poke-mote" class="form-label">Mote (Opcional)</label>
                                <input type="text" id="poke-mote" class="form-control" placeholder="Tu compa√±ero fiel">
                            </div>

                            <div class="row">
                                <div class="col-6 mb-3">
                                    <label for="poke-nivel" class="form-label">Nivel</label>
                                    <input type="number" id="poke-nivel" class="form-control" value="5" min="1" max="100">
                                </div>
                                <div class="col-6 mb-3">
                                    <label for="poke-estado" class="form-label">Estado</label>
                                    <select id="poke-estado" class="form-select">
                                        <option value="equipo" selected>Equipo</option>
                                        <option value="caja">PC (Caja)</option>
                                        <option value="cementerio">Muerto ‚ò†Ô∏è</option>
                                    </select>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary" onclick="guardarCaptura()">Guardar Pok√©mon</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ============================================= -->
    <!-- DETAILS MODAL                                 -->  
    <!-- ============================================= -->
    <section>   
        <div class="modal fade" id="detailsModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content border-0 shadow">
            
                <div class="modal-header bg-dark text-white" id="modal-details-header">
                    <h5 class="modal-title fw-bold" id="detail-title">Detalles</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body text-center">
                    <img id="detail-img" src="" class="mb-3" style="width: 120px; image-rendering: pixelated;">
                
                    <form id="form-editar">
                        <input type="hidden" id="edit-poke-id"> <div class="row g-2">
                            <div class="col-8">
                                <label class="form-label small text-muted">Mote</label>
                                <input type="text" id="edit-mote" class="form-control fw-bold text-center">
                            </div>
                            <div class="col-4">
                                <label class="form-label small text-muted">Nivel</label>
                                <input type="number" id="edit-nivel" class="form-control text-center">
                            </div>
                        </div>

                        <div class="mt-3">
                        <label class="form-label small text-muted">Estado Actual</label>
                                <select id="edit-estado" class="form-select text-center">
                                    <option value="equipo">üü¢ En el Equipo</option>
                                    <option value="caja">üì¶ En la Caja (PC)</option>
                                    <option value="cementerio">üíÄ Muerto (F)</option>
                                </select>
                             </div>
                    </form>
                </div>

                    <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-outline-danger btn-sm" onclick="borrarPokemon()">
                            <i class="bi bi-trash"></i> Liberar
                        </button>
                        
                        <button type="button" class="btn btn-primary" onclick="guardarCambiosPokemon()">
                            <i class="bi bi-save"></i> Guardar Cambios
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- ============================================= -->
    <!-- FOOTER                                        -->
    <!-- ============================================= -->
    <footer class="py-4 text-center text-body-secondary border-top">
        <div class="container">
            <p class="mb-0">¬© 2025 ‚Äì Built with Bootstrap</p>
        </div>
    </footer>


    <!-- ============================================= -->
    <!-- SCRIPTS (Logic & Animation)                   -->
    <!-- ============================================= -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Initialize the Animation Library -->
    <script>
        AOS.init({ once: true, offset: 120 });
    </script>

    <!-- Load our custom logic -->
    <script src="script.js"></script>

  </body>
</html>